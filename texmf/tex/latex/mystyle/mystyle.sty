\ProvidesPackage{mystyle}
\RequirePackage{kvoptions}

\SetupKeyvalOptions{
    family=fam,
    prefix=fam@
}

\DeclareBoolOption[false]{beamermode}
\DeclareBoolOption[false]{notes}

% Misc
\usepackage{hyperref}
\usepackage[makeroom, Smaller]{cancel}
\hypersetup{colorlinks=true, linkcolor=blue, urlcolor=teal}

% Graphics
\usepackage{float}
\usepackage{subcaption}
\usepackage{graphicx, import}
\usepackage{wrapfig}
\usepackage{tikz}
\usetikzlibrary{arrows, positioning}
\usepackage[all]{xy}
\usepackage{multirow}

\tikzstyle{rect} = [rectangle, draw, text centered, minimum width=50]

% Physics stuff
\usepackage{physics}
\usepackage{siunitx}

% Math stuff
\usepackage{amssymb, amsmath, amsthm, mathtools}
\setcounter{MaxMatrixCols}{24}
\usepackage{bbm}
\usepackage{calrsfs}
\usepackage{esint}

% Custom operators. This overwrites some symbols in other packages.
\usepackage{myoperators}

% CS stuff
\usepackage[linesnumbered,ruled,vlined,algosection]{algorithm2e}
\SetKwProg{Fn}{function}{:}{}
\usepackage{stmaryrd}
\SetSymbolFont{stmry}{bold}{U}{stmry}{m}{n}

% Sizes
\let\labelitemi\undefined
\newcommand\labelitemi{\raisebox{0.25ex}{\tiny$\bullet$}}
\setlength{\parindent}{0cm}
\setlength{\parskip}{1em plus 0.25em minus 0.25em}
\frenchspacing

\newcommand{\sectionbreak}{\begin{center}***\end{center}}

\let\temp\textvisiblespace
\renewcommand{\textvisiblespace}{\text{\temp}}

\ProcessKeyvalOptions*

\iffam@beamermode
% Beamer overwrites some stuff in enum, as well as defines its own theorem
% blocks so we cannot use our own.
    \usepackage{enumerate}
    \usepackage{pgfpages}
    \usefonttheme{professionalfonts}
    \usefonttheme[onlymath]{serif}

    \setbeamerfont{note page}{family*=pplx,size=\small}
    \setbeamerfont{itemize/enumerate subbody}{size=\small}
    \setbeamerfont{itemize/enumerate subitem}{size=\small}
    \setbeamerfont{footnote}{size=\tiny}

    \setbeamertemplate{itemize item}[circle]
    \setbeamertemplate{enumerate items}[circle]
    \setbeamertemplate{itemize subitem}{--}

    \iffam@notes
        \setbeameroption{show notes on second screen}

        \setbeamertemplate{note page}{%
            \vskip\parskip
            \setlength{\parskip}{1em plus 0.5em minus 0.5em}
            \renewcommand{\baselinestretch}{1}
            \nointerlineskip
            \insertnote\par
        }
    \fi

\else
    \usepackage[shortlabels]{enumitem}
    \usepackage{mytheorems}
\fi
